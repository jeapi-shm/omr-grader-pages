<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OMR 채점기 - 정답 입력</title>
  <style>
    body { font-family: system-ui, sans-serif; margin: 16px; }
    .card { border: 1px solid #ddd; padding: 14px; border-radius: 14px; margin: 12px 0; }
    .small { color:#666; font-size: 12px; line-height: 1.5; }
    .grid { display:grid; grid-template-columns: 1fr; gap: 10px; }
    @media (min-width: 900px){ .grid { grid-template-columns: 1fr 1fr; } }

    input { padding: 10px 12px; border-radius: 12px; border: 1px solid #ddd; font-size: 16px; }
    input:focus { outline: 2px solid rgba(31,111,235,.25); border-color: rgba(31,111,235,.45); }

    .row { display:flex; align-items:center; gap:10px; flex-wrap: wrap; }
    .label { width: 84px; font-weight: 800; }
    .hint { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; }

    .pill { display:inline-block; padding:2px 8px; border-radius: 999px; font-size: 12px; }
    .ok { background:#e9fff6; color:#0a7; }
    .warn { background:#fff4e8; color:#f60; }
    .bad { background:#ffecec; color:#c33; }

    button { padding: 10px 12px; border-radius: 12px; border: 1px solid #ddd; background:#fff; cursor:pointer; }
    button:active { transform: translateY(1px); }
    .primary { border-color: rgba(31,111,235,.35); }
    .danger { border-color: rgba(209,36,47,.35); }

    .mc-blocks { display:flex; flex-direction:column; gap:10px; }
    .sa-table { width:100%; border-collapse: collapse; }
    .sa-table td { padding: 6px 8px; border-bottom: 1px solid #eee; }
    .sa-no { width: 36px; font-weight: 800; color:#444; }
    .sa-input { width: 100%; }

    .stickyTop { position: sticky; top: 0; background: #fff; z-index: 10; padding-top: 6px; }
    .topBar { display:flex; justify-content: space-between; align-items:center; gap:10px; flex-wrap:wrap; }
    .topBar h2 { margin: 6px 0; }
  </style>
</head>
<body>

  <!-- 맨 위: 초기화 -->
  <div class="stickyTop">
    <div class="topBar">
      <h2>정답 입력</h2>
      <button id="clearBtn" class="danger">초기화</button>
    </div>
    <div class="small">
      객관식(30): 5문항씩 입력 → 5자리 채우면 자동 다음 칸<br/>
      주관식(10): 숫자/소수(.)/분수(/)만
    </div>
  </div>

  <div class="grid">
    <div class="card">
      <h3 style="margin-top:0;">객관식 정답 (1~30)</h3>
      <div class="small">
        1~5 숫자만 입력. 30문항을 다 채우지 않아도 채점은 동작(빈칸은 무시 예정).
      </div>

      <div class="mc-blocks" id="mcBlocks"></div>

      <div class="row" style="margin-top:10px;">
        <span id="mcStatus" class="pill warn">미완성</span>
        <span class="small">현재 MC 키: <span class="hint" id="mcKeyText">------------------------------</span></span>
      </div>
    </div>

    <div class="card">
      <h3 style="margin-top:0;">주관식 정답 (1~10)</h3>
      <div class="small">
        예: <span class="hint">12</span>, <span class="hint">3.14</span>, <span class="hint">1/3</span>
      </div>

      <table class="sa-table" id="saTable"></table>

      <div class="row" style="margin-top:10px;">
        <span id="saStatus" class="pill warn">미완성</span>
        <span class="small">현재 SA 키: <span class="hint" id="saKeyText">-</span></span>
      </div>
    </div>
  </div>

  <!-- 맨 아래: 저장 + 채점하기 -->
  <div class="card">
    <div class="row">
      <button id="gradeGoBtn" class="primary">채점하기</button>
      <button id="saveBtn">정답 저장</button>
    </div>
    <div class="small" style="margin-top:8px;">
      정답은 이 브라우저(localStorage)에 저장됩니다. “채점하기”는 새 페이지에서 진행합니다.
    </div>
  </div>

  <script defer src="./app.js"></script>

  <!-- index.html에서만: 채점 페이지로 이동 버튼 -->
  <script>
    // grade.html은 다음 단계에서 만들 예정
    document.addEventListener("DOMContentLoaded", () => {
      const btn = document.getElementById("gradeGoBtn");
      if(btn){
        btn.addEventListener("click", () => {
          // app.js의 저장 기능을 사용자가 누르지 않았어도,
          // 대부분 입력은 실시간 state에 반영되지만 grade 페이지에서 읽으려면 저장이 필요함.
          // 그래서 사용성 위해 저장을 먼저 유도:
          const go = confirm("채점 페이지로 이동할까요?\n(정답이 저장되어 있어야 채점 페이지에서 불러올 수 있어요.)");
          if(!go) return;
          window.location.href = "./grade.html";
        });
      }
    });
  </script>
</body>
</html>
